# ã‚¿ã‚¹ã‚¯ã‚¿ã‚°æ©Ÿèƒ½ - è¨­è¨ˆä»•æ§˜æ›¸

## ğŸ“‹ æ¦‚è¦

Appleç´”æ­£ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å‚è€ƒã«ã—ãŸã‚¿ã‚¹ã‚¯ã‚¿ã‚°æ©Ÿèƒ½ã®åŒ…æ‹¬çš„ãªè¨­è¨ˆä»•æ§˜æ›¸ã§ã™ã€‚
æ—¢å­˜ã®`ShigodekiTask.tags: [String]`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ´»ç”¨ã—ã€ç›´æ„Ÿçš„ã§åŠ¹ç‡çš„ãªã‚¿ã‚¹ã‚¯åˆ†é¡ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## ğŸ¯ é‹ç”¨è¨­è¨ˆï¼ˆAppleç´”æ­£ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å‚è€ƒï¼‰

### ã‚¿ã‚°ã®åŸºæœ¬æ¦‚å¿µ
- **ç”¨é€”**: ã‚¿ã‚¹ã‚¯ã®æ¨ªæ–­çš„ãªåˆ†é¡ãƒ»æ•´ç†ï¼ˆå„ªå…ˆåº¦ã‚„æ‹…å½“è€…ã¨ã¯åˆ¥è»¸ï¼‰
- **è¦–è¦š**: ã‚«ãƒ©ãƒ•ãƒ«ãªã‚¿ã‚°UIã§ç›´æ„Ÿçš„ãªè­˜åˆ¥
- **æ¤œç´¢**: ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½
- **å…±æœ‰**: å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼é–“ã§ã®ã‚¿ã‚°å…±æœ‰ã¨çµ±ä¸€ç®¡ç†

### æ¨å¥¨ã‚¿ã‚°ä½“ç³»
```
ğŸ  å®¶äº‹
   - æƒé™¤ã€æ´—æ¿¯ã€æ–™ç†ã€æ•´ç†æ•´é “é–¢é€£

ğŸ’° æ”¯æ‰•ã„  
   - å„ç¨®æ–™é‡‘ã€ç¨é‡‘ã€ä¿é™ºæ–™é–¢é€£

ğŸ›’ è²·ã„ç‰©
   - æ—¥ç”¨å“ã€é£Ÿæã€æ¶ˆè€—å“è³¼å…¥

ğŸ“‹ äº‹å‹™
   - æ‰‹ç¶šãã€æ›¸é¡ä½œæˆã€ç”³è«‹é–¢é€£

ğŸ”§ ä¿®ç†ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
   - å®¶é›»ã€è¨­å‚™ã®ç‚¹æ¤œãƒ»ä¿®ç†

ğŸ“ é€£çµ¡ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
   - é›»è©±ã€ãƒ¡ãƒ¼ãƒ«ã€è¨ªå•å¯¾å¿œ

ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»è¡Œäº‹
   - èª•ç”Ÿæ—¥ã€è¨˜å¿µæ—¥ã€å­£ç¯€è¡Œäº‹æº–å‚™

ğŸ“š å­¦ç¿’ãƒ»è‡ªå·±å•“ç™º
   - å‹‰å¼·ã€ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã€æƒ…å ±åé›†

ğŸ¥ å¥åº·ãƒ»åŒ»ç™‚
   - ç—…é™¢äºˆç´„ã€å¥åº·ç®¡ç†ã€è–¬é–¢é€£

ğŸŒ± è¶£å‘³ãƒ»å¨¯æ¥½
   - å€‹äººã®è¶£å‘³ã€ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
```

## ğŸ— ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ

### æ—¢å­˜ãƒ¢ãƒ‡ãƒ«æ‹¡å¼µ
```swift
// æ—¢å­˜: ShigodekiTask.tags: [String] â† æ´»ç”¨
struct ShigodekiTask {
    // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    var tags: [String] // â† æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ´»ç”¨
}
```

### æ–°è¦ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«
```swift
struct TaskTag: Identifiable, Codable, Hashable {
    var id: String?
    let name: String
    let color: String // Hex color code
    let emoji: String? // Optional emoji prefix
    var familyId: String
    var usageCount: Int // ä½¿ç”¨é »åº¦è¿½è·¡
    var createdAt: Date?
    var lastUsedAt: Date?
    
    // è¡¨ç¤ºç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    var displayName: String {
        if let emoji = emoji {
            return "\(emoji) \(name)"
        }
        return name
    }
}
```

### ã‚¿ã‚°ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```swift
enum TagColor: String, CaseIterable, Codable {
    case red = "#FF3B30"
    case orange = "#FF9500"
    case yellow = "#FFCC00"
    case green = "#34C759"
    case mint = "#00C7BE"
    case teal = "#30B0C7"
    case cyan = "#32ADE6"
    case blue = "#007AFF"
    case indigo = "#5856D6"
    case purple = "#AF52DE"
    case pink = "#FF2D92"
    case brown = "#A2845E"
    case gray = "#8E8E93"
    
    var swiftUIColor: Color {
        return Color(hex: self.rawValue)
    }
}
```

## ğŸ¨ UI/UXã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 1. TagInputView - ã‚¿ã‚°å…¥åŠ›ãƒ»é¸æŠ
**é…ç½®**: `CreateTaskView`ã«çµ±åˆ
**æ©Ÿèƒ½**:
- ã‚ˆãä½¿ã†ã‚¿ã‚°ã®å€™è£œè¡¨ç¤ºï¼ˆä½¿ç”¨é »åº¦é †ï¼‰
- æ–°è¦ã‚¿ã‚°ã®ä½œæˆæ©Ÿèƒ½
- ã‚¿ã‚°ã®è‰²é¸æŠUI
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```swift
struct TagInputView: View {
    @Binding var selectedTags: [String]
    let availableTags: [TaskTag]
    let onTagCreated: (TaskTag) -> Void
    
    @State private var searchText = ""
    @State private var showingCreateTag = false
    
    var filteredTags: [TaskTag] {
        let filtered = availableTags.filter { 
            $0.name.localizedCaseInsensitiveContains(searchText)
        }
        return filtered.isEmpty && !searchText.isEmpty 
            ? [] 
            : filtered.sorted { $0.usageCount > $1.usageCount }
    }
    
    var canCreateTag: Bool {
        !searchText.isEmpty && !availableTags.contains { $0.name.lowercased() == searchText.lowercased() }
    }
    
    var body: some View {
        VStack(alignment: .leading, spacing: 12) {
            // Search
            TextField("ã‚¿ã‚°ã‚’æ¤œç´¢ã¾ãŸã¯æ–°è¦ä½œæˆ...", text: $searchText)
                .textFieldStyle(.roundedBorder)
            
            // Selected Tags
            if !selectedTags.isEmpty {
                ScrollView(.horizontal, showsIndicators: false) {
                    HStack(spacing: 8) {
                        ForEach(selectedTags, id: \.self) { tagName in
                            // ä»®ã®ãƒã‚¹ã‚¿ãƒ¼æƒ…å ±ã‚’æ¸¡ã™ã‹ã€åˆ¥é€”å–å¾—ãƒ­ã‚¸ãƒƒã‚¯ãŒå¿…è¦
                            // ã“ã“ã§ã¯ç°¡ç•¥åŒ–ã®ãŸã‚ã€è‰²ã‚’å›ºå®šã§è¡¨ç¤º
                            TagChip(tagName: tagName, isSelected: true) {
                                selectedTags.removeAll { $0 == tagName }
                            }
                        }
                    }
                    .padding(.horizontal)
                }
            }
            
            // Available Tags & Create Option
            ScrollView {
                LazyVGrid(columns: Array(repeating: GridItem(.flexible()), count: 3), spacing: 8) {
                    // æ–°è¦ä½œæˆãƒœã‚¿ãƒ³ã‚’å€™è£œã®å…ˆé ­ã«è¡¨ç¤º
                    if canCreateTag {
                        Button(action: {
                            showingCreateTag = true
                        }) {
                            Text("ï¼‹ \"\(searchText)\" ã‚’ä½œæˆ")
                                .font(.caption)
                                .foregroundColor(.accentColor)
                                .frame(maxWidth: .infinity, minHeight: 30)
                                .background(Color.accentColor.opacity(0.1))
                                .cornerRadius(8)
                        }
                    }
                    
                    ForEach(filteredTags) { tag in
                        TagChip(
                            tag: tag, 
                            isSelected: selectedTags.contains(tag.name)
                        ) {
                            toggleTag(tag.name)
                        }
                    }
                }
            }
        }
        .sheet(isPresented: $showingCreateTag) {
            CreateTagView(
                initialName: searchText,
                onTagCreated: { newTag in
                    onTagCreated(newTag)
                    // ä½œæˆå¾Œã€é¸æŠçŠ¶æ…‹ã«ã—ã€æ¤œç´¢ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢
                    if !selectedTags.contains(newTag.name) {
                        selectedTags.append(newTag.name)
                    }
                    searchText = ""
                }
            )
        }
    }
    
    private func toggleTag(_ tagName: String) {
        if let index = selectedTags.firstIndex(of: tagName) {
            selectedTags.remove(at: index)
        } else {
            selectedTags.append(tagName)
        }
    }
}
```

### 2. TagDisplayView - ã‚¿ã‚¹ã‚¯ã§ã®ã‚¿ã‚°è¡¨ç¤º
**é…ç½®**: `TaskRowView`ã«ã‚¿ã‚°ãƒãƒƒãƒ—è¿½åŠ 
**æ©Ÿèƒ½**:
- ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªãƒãƒƒã‚¸è¡¨ç¤º
- ã‚¿ãƒƒãƒ—ã§ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- æœ€å¤§è¡¨ç¤ºæ•°åˆ¶é™ï¼ˆ3å€‹ + "ä»–Xå€‹"ï¼‰

```swift
struct TagDisplayView: View {
    let tags: [String]
    let tagMasters: [TaskTag]
    let maxDisplayCount = 3
    let onTagTapped: (String) -> Void
    
    var displayTags: [TaskTag] {
        let foundTags = tags.compactMap { tagName in
            tagMasters.first { $0.name == tagName }
        }
        return Array(foundTags.prefix(maxDisplayCount))
    }
    
    var remainingCount: Int {
        max(0, tags.count - maxDisplayCount)
    }
    
    var body: some View {
        HStack(spacing: 4) {
            ForEach(displayTags) { tag in
                TagChip(tag: tag, size: .small) {
                    onTagTapped(tag.name)
                }
            }
            
            if remainingCount > 0 {
                Text("+\(remainingCount)")
                    .font(.caption2)
                    .foregroundColor(.secondary)
                    .padding(.horizontal, 6)
                    .padding(.vertical, 2)
                    .background(Color.gray.opacity(0.2))
                    .cornerRadius(8)
            }
        }
    }
}
```

### 3. TagManagementView - ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†
**é…ç½®**: è¨­å®šç”»é¢ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹
**æ©Ÿèƒ½**:
- å®¶æ—å…±æœ‰ã®ã‚¿ã‚°ä¸€è¦§
- ã‚¿ã‚°ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ï¼ˆ**å®‰å…¨ãªå‰Šé™¤ãƒ•ãƒ­ãƒ¼**ï¼‰
- ä½¿ç”¨é »åº¦ã«åŸºã¥ãæ•´ç†
- æœªä½¿ç”¨ã‚¿ã‚°ã®æ•´ç†

```swift
struct TagManagementView: View {
    @StateObject private var tagManager = TagManager()
    @State private var showingCreateTag = false
    @State private var editingTag: TaskTag?
    @State private var tagToDelete: TaskTag?
    
    var sortedTags: [TaskTag] {
        tagManager.tags.sorted { $0.usageCount > $1.usageCount }
    }
    
    var body: some View {
        NavigationView {
            List {
                ForEach(sortedTags) { tag in
                    TagManagementRow(
                        tag: tag,
                        onEdit: { editingTag = tag },
                        onDelete: {
                            // ä½¿ç”¨çŠ¶æ³ã«å¿œã˜ã¦å‰Šé™¤ãƒ•ãƒ­ãƒ¼ã‚’å¤‰æ›´
                            if tag.usageCount > 0 {
                                tagToDelete = tag
                            } else {
                                tagManager.deleteTag(tag) // æœªä½¿ç”¨ãªã‚‰å³å‰Šé™¤
                            }
                        }
                    )
                }
            }
            .navigationTitle("ã‚¿ã‚°ç®¡ç†")
            .toolbar {
                ToolbarItem(placement: .navigationBarTrailing) {
                    Button("è¿½åŠ ") {
                        showingCreateTag = true
                    }
                }
            }
            .alert(item: $tagToDelete) { tag in
                Alert(
                    title: Text("ã‚¿ã‚°ã€Œ\(tag.name)ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"),
                    message: Text("ã“ã®ã‚¿ã‚°ã¯\(tag.usageCount)å€‹ã®ã‚¿ã‚¹ã‚¯ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚å‰Šé™¤ã™ã‚‹ã¨ã€ã“ã‚Œã‚‰ã®ã‚¿ã‚¹ã‚¯ã‹ã‚‰ã‚¿ã‚°ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚"),
                    primaryButton: .destructive(Text("å‰Šé™¤")) {
                        tagManager.deleteTag(tag)
                    },
                    secondaryButton: .cancel()
                )
            }
        }
        .sheet(isPresented: $showingCreateTag) {
            CreateTagView { newTag in
                tagManager.createTag(newTag)
            }
        }
        .sheet(item: $editingTag) { tag in
            EditTagView(tag: tag) { updatedTag in
                tagManager.updateTag(updatedTag)
            }
        }
    }
}
```

### 4. TagFilterView - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
**é…ç½®**: `TaskDetailView`ã§ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
**æ©Ÿèƒ½**:
- è¤‡æ•°ã‚¿ã‚°ã§ã®AND/ORæ¤œç´¢ï¼ˆ**UIã§ã®æ˜ç¤ºãŒå¿…è¦**ï¼‰
- ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ã®è¦–è¦šçš„è¡¨ç¤º

### 5. TagChip - å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```swift
struct TagChip: View {
    // å†…éƒ¨ã§ä½¿ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    private let displayName: String
    private let backgroundColor: Color
    private let foregroundColor: Color
    private let size: TagSize
    private let action: () -> Void
    
    enum TagSize {
        case small, medium
        
        var font: Font {
            switch self {
            case .small: return .caption2
            case .medium: return .caption
            }
        }
        
        var padding: EdgeInsets {
            switch self {
            case .small: return EdgeInsets(top: 2, leading: 6, bottom: 2, trailing: 6)
            case .medium: return EdgeInsets(top: 4, leading: 8, bottom: 4, trailing: 8)
            }
        }
        
        var cornerRadius: CGFloat {
            switch self {
            case .small: return 6
            case .medium: return 8
            }
        }
    }
    
    // ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶ã‚’çµ±ä¸€ã—ã€å¯èª­æ€§ã‚’å‘ä¸Š
    init(
        tag: TaskTag,
        size: TagSize = .medium,
        isSelected: Bool = false,
        action: @escaping () -> Void
    ) {
        self.displayName = tag.displayName
        self.size = size
        self.action = action
        
        if isSelected {
            self.backgroundColor = Color(hex: tag.color)
            self.foregroundColor = .white
        } else {
            // æœªé¸æŠæ™‚ã¯èƒŒæ™¯ã‚’è–„ãã—ã€æ–‡å­—è‰²ã‚’ä¿ã¤ã“ã¨ã§å¯èª­æ€§ã‚’ç¢ºä¿
            self.backgroundColor = Color(hex: tag.color).opacity(0.2)
            self.foregroundColor = .primary
        }
    }
    
    // ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ãŒã¾ã ãªã„å ´åˆï¼ˆé¸æŠæ¸ˆã¿ãƒãƒƒãƒ—ãªã©ï¼‰
    init(
        tagName: String,
        size: TagSize = .medium,
        isSelected: Bool = false,
        action: @escaping () -> Void
    ) {
        self.displayName = tagName
        self.size = size
        self.action = action
        
        if isSelected {
            self.backgroundColor = .accentColor
            self.foregroundColor = .white
        } else {
            self.backgroundColor = .gray.opacity(0.2)
            self.foregroundColor = .primary
        }
    }
    
    var body: some View {
        Button(action: action) {
            Text(displayName)
                .font(size.font)
                .foregroundColor(foregroundColor)
                .padding(size.padding)
                .background(backgroundColor)
                .cornerRadius(size.cornerRadius)
        }
        .buttonStyle(.plain)
    }
}
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### Firestoreæ§‹é€ 
```
families/{familyId}/
â”œâ”€â”€ tasks/{taskId}
â”‚   â”œâ”€â”€ title: String
â”‚   â”œâ”€â”€ description: String
â”‚   â”œâ”€â”€ tags: [String] (æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
â”‚   â””â”€â”€ ... (ä»–ã®æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
â”‚
â””â”€â”€ tagMasters/{tagId}
    â”œâ”€â”€ name: String
    â”œâ”€â”€ color: String (Hex code)
    â”œâ”€â”€ emoji: String?
    â”œâ”€â”€ familyId: String
    â”œâ”€â”€ usageCount: Number
    â”œâ”€â”€ createdAt: Timestamp
    â””â”€â”€ lastUsedAt: Timestamp
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
```javascript
// å¿…è¦ãªè¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
db.collection("families/{familyId}/tagMasters")
  .createIndex({
    familyId: 1,
    usageCount: -1
  });

db.collection("families/{familyId}/tagMasters")
  .createIndex({
    familyId: 1,
    name: 1
  });
```

## ğŸ”§ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ã‚¿ã‚°ã®åŸºæœ¬çš„ãªä½œæˆãƒ»è¡¨ç¤ºæ©Ÿèƒ½
1. `TaskTag`ãƒ¢ãƒ‡ãƒ«ä½œæˆãƒ»Firestoreçµ±åˆ
2. `TagChip`å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
3. `CreateTaskView`ã«`TagInputView`çµ±åˆ
4. `TaskRowView`ã«`TagDisplayView`çµ±åˆ
5. åŸºæœ¬çš„ãªCRUDæ“ä½œ

**æˆæœç‰©**:
- ã‚¿ã‚°ä½œæˆãƒ»é¸æŠæ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ã§ã®ã‚¿ã‚°è¡¨ç¤º
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤æ§‹ç¯‰

### Phase 2: ç®¡ç†æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†ã¨ä½¿ç”¨çŠ¶æ³è¿½è·¡
1. `TagManagementView`å®Ÿè£…
2. ã‚¿ã‚°ä½¿ç”¨å±¥æ­´è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 
3. æœªä½¿ç”¨ã‚¿ã‚°ã®æ•´ç†æ©Ÿèƒ½
4. ã‚¿ã‚°ç·¨é›†ãƒ»å‰Šé™¤æ©Ÿèƒ½ï¼ˆ**å®‰å…¨ãªå‰Šé™¤ãƒ•ãƒ­ãƒ¼å«ã‚€**ï¼‰
5. ãƒãƒ«ã‚¯æ“ä½œæ©Ÿèƒ½

**æˆæœç‰©**:
- ã‚¿ã‚°ç®¡ç†ç”»é¢
- ä½¿ç”¨é »åº¦ãƒ™ãƒ¼ã‚¹æ•´ç†
- å®¶æ—å…±æœ‰ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ 

### Phase 3: é«˜åº¦æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨æ¤œç´¢æ©Ÿèƒ½
1. `TagFilterView`å®Ÿè£…
2. ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã‚¿ã‚¹ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
3. è¤‡æ•°ã‚¿ã‚°ã§ã®AND/ORæ¤œç´¢
4. ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³
5. ã‚¿ã‚°æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ï¼ˆAIé€£æºï¼‰

**æˆæœç‰©**:
- é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹æ¤œç´¢
- AIæ¨å¥¨ã‚¿ã‚°æ©Ÿèƒ½

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```swift
// TagManagerTests.swift
class TagManagerTests: XCTestCase {
    func testCreateTag() {
        // ã‚¿ã‚°ä½œæˆãƒ†ã‚¹ãƒˆ
    }
    
    func testUpdateUsageCount() {
        // ä½¿ç”¨å›æ•°æ›´æ–°ãƒ†ã‚¹ãƒˆ
    }
    
    func testDeleteUnusedTags() {
        // æœªä½¿ç”¨ã‚¿ã‚°å‰Šé™¤ãƒ†ã‚¹ãƒˆ
    }
    
    func testDeleteUsedTagWithConfirmation() {
        // ä½¿ç”¨ä¸­ã‚¿ã‚°ã®å‰Šé™¤ç¢ºèªãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
    }
}

// TagFilterTests.swift  
class TagFilterTests: XCTestCase {
    func testANDFiltering() {
        // ANDæ¤œç´¢ãƒ†ã‚¹ãƒˆ
    }
    
    func testORFiltering() {
        // ORæ¤œç´¢ãƒ†ã‚¹ãƒˆ
    }
}
```

### çµ±åˆãƒ†ã‚¹ãƒˆ
- ã‚¿ã‚°ä»˜ãã‚¿ã‚¹ã‚¯ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤
- å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼é–“ã§ã®ã‚¿ã‚°å…±æœ‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã®æ•´åˆæ€§

### UIãƒ†ã‚¹ãƒˆ  
- ã‚¿ã‚°é¸æŠUIæ“ä½œ
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ã‚¿ã‚°ç®¡ç†ç”»é¢æ“ä½œ

## ğŸ¨ UXè€ƒæ…®äº‹é …

### ç›´æ„Ÿæ€§
- Appleç´”æ­£ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã¨ã®UIãƒ‘ã‚¿ãƒ¼ãƒ³çµ±ä¸€
- è‰²åˆ†ã‘ã¨ã‚¨ãƒ¢ã‚¸ã«ã‚ˆã‚‹è¦–è¦šçš„åˆ†ã‹ã‚Šã‚„ã™ã•
- ä¸€è²«ã—ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³
- **æ¤œç´¢ã‹ã‚‰ä½œæˆã¾ã§ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªãƒ•ãƒ­ãƒ¼**

### åŠ¹ç‡æ€§
- ã‚ˆãä½¿ã†ã‚¿ã‚°ã®ä¸Šä½è¡¨ç¤º
- ã‚¯ã‚¤ãƒƒã‚¯é¸æŠæ©Ÿèƒ½
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œ

### å®¶æ—å…±æœ‰
- çµ±ä¸€ã•ã‚ŒãŸã‚¿ã‚°ä½“ç³»
- åˆ©ç”¨çŠ¶æ³ã®å¯è¦–åŒ–
- é‡è¤‡ã‚¿ã‚°ã®é˜²æ­¢æ©Ÿèƒ½
- **æ„å›³ã—ãªã„ãƒ‡ãƒ¼ã‚¿ç ´å£Šã‚’é˜²ãå®‰å…¨ãªå‰Šé™¤ãƒ•ãƒ­ãƒ¼**

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ã‚¿ã‚°æ•°ãŒå¤šã„å ´åˆã®ä»®æƒ³åŒ–è¡¨ç¤º
- é…å»¶èª­ã¿è¾¼ã¿å¯¾å¿œ
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½æ´»ç”¨

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- **ååˆ†ãªã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã®ç¢ºä¿**
- VoiceOverå¯¾å¿œ

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- å®¶æ—ã‚¹ã‚³ãƒ¼ãƒ—ã§ã®ã‚¿ã‚°éš”é›¢
- é©åˆ‡ãªFirestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
- PIIï¼ˆå€‹äººè­˜åˆ¥æƒ…å ±ï¼‰ã®é™¤å¤–

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
```javascript
// Firestore Security Rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼ã¯è‡ªåˆ†ã®å®¶æ—ã®ã‚¿ã‚°ã‚’èª­ã¿æ›¸ãã§ãã‚‹
    // request.auth.token.familyId ã§å®¶æ—IDã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨
    match /families/{familyId}/tagMasters/{tagId} {
      allow read, write: if request.auth != null && get(/databases/$(database)/documents/families/$(familyId)).data.members[request.auth.uid] != null;
    }
  }
}
```

## ğŸ“ˆ æ‹¡å¼µå¯èƒ½æ€§

### å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µ
- ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½
- è‡ªå‹•ã‚¿ã‚°ææ¡ˆï¼ˆMLæ´»ç”¨ï¼‰
- ã‚¿ã‚°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- ä»–ã‚¢ãƒ—ãƒªã¨ã®ã‚¿ã‚°åŒæœŸ

---

## ğŸ“ æ›´æ–°å±¥æ­´
- 2025-01-XX: åˆç‰ˆä½œæˆ
- Phaseå®Œäº†æ™‚ã«é©å®œæ›´æ–°äºˆå®š

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯é–‹ç™ºãƒãƒ¼ãƒ å…¨ä½“ã§ã®ä»•æ§˜å…±æœ‰ã¨ã€ä¸€è²«ã—ãŸå®Ÿè£…ã®ãŸã‚ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¨ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚**
                    showingCreateTag = true
                }
                .disabled(searchText.isEmpty)
            }
            
            // Selected Tags
            if !selectedTags.isEmpty {
                ScrollView(.horizontal, showsIndicators: false) {
                    HStack(spacing: 8) {
                        ForEach(selectedTags, id: \.self) { tagName in
                            TagChip(tagName: tagName, isSelected: true) {
                                selectedTags.removeAll { $0 == tagName }
                            }
                        }
                    }
                    .padding(.horizontal)
                }
            }
            
            // Available Tags
            LazyVGrid(columns: Array(repeating: GridItem(.flexible()), count: 3), spacing: 8) {
                ForEach(filteredTags) { tag in
                    TagChip(
                        tag: tag, 
                        isSelected: selectedTags.contains(tag.name)
                    ) {
                        toggleTag(tag.name)
                    }
                }
            }
        }
        .sheet(isPresented: $showingCreateTag) {
            CreateTagView(
                initialName: searchText,
                onTagCreated: onTagCreated
            )
        }
    }
}
```

### 2. TagDisplayView - ã‚¿ã‚¹ã‚¯ã§ã®ã‚¿ã‚°è¡¨ç¤º
**é…ç½®**: `TaskRowView`ã«ã‚¿ã‚°ãƒãƒƒãƒ—è¿½åŠ 
**æ©Ÿèƒ½**:
- ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªãƒãƒƒã‚¸è¡¨ç¤º
- ã‚¿ãƒƒãƒ—ã§ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- æœ€å¤§è¡¨ç¤ºæ•°åˆ¶é™ï¼ˆ3å€‹ + "ä»–Xå€‹"ï¼‰

```swift
struct TagDisplayView: View {
    let tags: [String]
    let tagMasters: [TaskTag]
    let maxDisplayCount = 3
    let onTagTapped: (String) -> Void
    
    var displayTags: [TaskTag] {
        let foundTags = tags.compactMap { tagName in
            tagMasters.first { $0.name == tagName }
        }
        return Array(foundTags.prefix(maxDisplayCount))
    }
    
    var remainingCount: Int {
        max(0, tags.count - maxDisplayCount)
    }
    
    var body: some View {
        HStack(spacing: 4) {
            ForEach(displayTags) { tag in
                TagChip(tag: tag, size: .small) {
                    onTagTapped(tag.name)
                }
            }
            
            if remainingCount > 0 {
                Text("+\(remainingCount)")
                    .font(.caption2)
                    .foregroundColor(.secondary)
                    .padding(.horizontal, 6)
                    .padding(.vertical, 2)
                    .background(Color.gray.opacity(0.2))
                    .cornerRadius(8)
            }
        }
    }
}
```

### 3. TagManagementView - ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†
**é…ç½®**: è¨­å®šç”»é¢ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹
**æ©Ÿèƒ½**:
- å®¶æ—å…±æœ‰ã®ã‚¿ã‚°ä¸€è¦§
- ã‚¿ã‚°ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- ä½¿ç”¨é »åº¦ã«åŸºã¥ãæ•´ç†
- æœªä½¿ç”¨ã‚¿ã‚°ã®æ•´ç†

```swift
struct TagManagementView: View {
    @StateObject private var tagManager = TagManager()
    @State private var showingCreateTag = false
    @State private var editingTag: TaskTag?
    
    var sortedTags: [TaskTag] {
        tagManager.tags.sorted { $0.usageCount > $1.usageCount }
    }
    
    var body: some View {
        NavigationView {
            List {
                Section("ã‚ˆãä½¿ã†ã‚¿ã‚°") {
                    ForEach(sortedTags.prefix(10)) { tag in
                        TagManagementRow(
                            tag: tag,
                            onEdit: { editingTag = tag },
                            onDelete: { tagManager.deleteTag(tag) }
                        )
                    }
                }
                
                if sortedTags.count > 10 {
                    Section("ãã®ä»–ã®ã‚¿ã‚°") {
                        ForEach(Array(sortedTags.dropFirst(10))) { tag in
                            TagManagementRow(
                                tag: tag,
                                onEdit: { editingTag = tag },
                                onDelete: { tagManager.deleteTag(tag) }
                            )
                        }
                    }
                }
            }
            .navigationTitle("ã‚¿ã‚°ç®¡ç†")
            .toolbar {
                ToolbarItem(placement: .navigationBarTrailing) {
                    Button("è¿½åŠ ") {
                        showingCreateTag = true
                    }
                }
            }
        }
        .sheet(isPresented: $showingCreateTag) {
            CreateTagView { newTag in
                tagManager.createTag(newTag)
            }
        }
        .sheet(item: $editingTag) { tag in
            EditTagView(tag: tag) { updatedTag in
                tagManager.updateTag(updatedTag)
            }
        }
    }
}
```

### 4. TagFilterView - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
**é…ç½®**: `TaskDetailView`ã§ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
**æ©Ÿèƒ½**:
- è¤‡æ•°ã‚¿ã‚°ã§ã®AND/ORæ¤œç´¢
- ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ã®è¦–è¦šçš„è¡¨ç¤º

### 5. TagChip - å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```swift
struct TagChip: View {
    let tag: TaskTag?
    let tagName: String?
    let isSelected: Bool
    let size: TagSize
    let action: () -> Void
    
    enum TagSize {
        case small, medium, large
        
        var fontSize: Font {
            switch self {
            case .small: return .caption2
            case .medium: return .caption
            case .large: return .footnote
            }
        }
        
        var padding: EdgeInsets {
            switch self {
            case .small: return EdgeInsets(top: 2, leading: 6, bottom: 2, trailing: 6)
            case .medium: return EdgeInsets(top: 4, leading: 8, bottom: 4, trailing: 8)
            case .large: return EdgeInsets(top: 6, leading: 12, bottom: 6, trailing: 12)
            }
        }
    }
    
    init(tag: TaskTag, size: TagSize = .medium, isSelected: Bool = false, action: @escaping () -> Void) {
        self.tag = tag
        self.tagName = nil
        self.size = size
        self.isSelected = isSelected
        self.action = action
    }
    
    init(tagName: String, size: TagSize = .medium, isSelected: Bool = false, action: @escaping () -> Void) {
        self.tag = nil
        self.tagName = tagName
        self.size = size
        self.isSelected = isSelected
        self.action = action
    }
    
    var displayName: String {
        tag?.displayName ?? tagName ?? ""
    }
    
    var backgroundColor: Color {
        if let tag = tag {
            return Color(hex: tag.color).opacity(isSelected ? 1.0 : 0.3)
        }
        return isSelected ? .blue : .gray.opacity(0.3)
    }
    
    var body: some View {
        Button(action: action) {
            Text(displayName)
                .font(size.fontSize)
                .foregroundColor(isSelected ? .white : .primary)
                .padding(size.padding)
                .background(backgroundColor)
                .cornerRadius(size == .small ? 6 : 8)
        }
        .buttonStyle(.plain)
    }
}
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### Firestoreæ§‹é€ 
```
families/{familyId}/
â”œâ”€â”€ tasks/{taskId}
â”‚   â”œâ”€â”€ title: String
â”‚   â”œâ”€â”€ description: String
â”‚   â”œâ”€â”€ tags: [String] (æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
â”‚   â””â”€â”€ ... (ä»–ã®æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
â”‚
â””â”€â”€ tagMasters/{tagId}
    â”œâ”€â”€ name: String
    â”œâ”€â”€ color: String (Hex code)
    â”œâ”€â”€ emoji: String?
    â”œâ”€â”€ familyId: String
    â”œâ”€â”€ usageCount: Number
    â”œâ”€â”€ createdAt: Timestamp
    â””â”€â”€ lastUsedAt: Timestamp
```

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
```javascript
// å¿…è¦ãªè¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
db.collection("families/{familyId}/tagMasters")
  .createIndex({
    familyId: 1,
    usageCount: -1
  });

db.collection("families/{familyId}/tagMasters")
  .createIndex({
    familyId: 1,
    name: 1
  });
```

## ğŸ”§ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ã‚¿ã‚°ã®åŸºæœ¬çš„ãªä½œæˆãƒ»è¡¨ç¤ºæ©Ÿèƒ½
1. `TaskTag`ãƒ¢ãƒ‡ãƒ«ä½œæˆãƒ»Firestoreçµ±åˆ
2. `TagChip`å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
3. `CreateTaskView`ã«`TagInputView`çµ±åˆ
4. `TaskRowView`ã«`TagDisplayView`çµ±åˆ
5. åŸºæœ¬çš„ãªCRUDæ“ä½œ

**æˆæœç‰©**:
- ã‚¿ã‚°ä½œæˆãƒ»é¸æŠæ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ã§ã®ã‚¿ã‚°è¡¨ç¤º
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤æ§‹ç¯‰

### Phase 2: ç®¡ç†æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ã‚¿ã‚°ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†ã¨ä½¿ç”¨çŠ¶æ³è¿½è·¡
1. `TagManagementView`å®Ÿè£…
2. ã‚¿ã‚°ä½¿ç”¨å±¥æ­´è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ 
3. æœªä½¿ç”¨ã‚¿ã‚°ã®æ•´ç†æ©Ÿèƒ½
4. ã‚¿ã‚°ç·¨é›†ãƒ»å‰Šé™¤æ©Ÿèƒ½
5. ãƒãƒ«ã‚¯æ“ä½œæ©Ÿèƒ½

**æˆæœç‰©**:
- ã‚¿ã‚°ç®¡ç†ç”»é¢
- ä½¿ç”¨é »åº¦ãƒ™ãƒ¼ã‚¹æ•´ç†
- å®¶æ—å…±æœ‰ã‚¿ã‚°ã‚·ã‚¹ãƒ†ãƒ 

### Phase 3: é«˜åº¦æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰
**ç›®æ¨™**: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã¨æ¤œç´¢æ©Ÿèƒ½
1. `TagFilterView`å®Ÿè£…
2. ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã‚¿ã‚¹ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
3. è¤‡æ•°ã‚¿ã‚°ã§ã®AND/ORæ¤œç´¢
4. ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³
5. ã‚¿ã‚°æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ï¼ˆAIé€£æºï¼‰

**æˆæœç‰©**:
- é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹æ¤œç´¢
- AIæ¨å¥¨ã‚¿ã‚°æ©Ÿèƒ½

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```swift
// TagManagerTests.swift
class TagManagerTests: XCTestCase {
    func testCreateTag() {
        // ã‚¿ã‚°ä½œæˆãƒ†ã‚¹ãƒˆ
    }
    
    func testUpdateUsageCount() {
        // ä½¿ç”¨å›æ•°æ›´æ–°ãƒ†ã‚¹ãƒˆ
    }
    
    func testDeleteUnusedTags() {
        // æœªä½¿ç”¨ã‚¿ã‚°å‰Šé™¤ãƒ†ã‚¹ãƒˆ
    }
}

// TagFilterTests.swift  
class TagFilterTests: XCTestCase {
    func testANDFiltering() {
        // ANDæ¤œç´¢ãƒ†ã‚¹ãƒˆ
    }
    
    func testORFiltering() {
        // ORæ¤œç´¢ãƒ†ã‚¹ãƒˆ
    }
}
```

### çµ±åˆãƒ†ã‚¹ãƒˆ
- ã‚¿ã‚°ä»˜ãã‚¿ã‚¹ã‚¯ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤
- å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼é–“ã§ã®ã‚¿ã‚°å…±æœ‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã®æ•´åˆæ€§

### UIãƒ†ã‚¹ãƒˆ  
- ã‚¿ã‚°é¸æŠUIæ“ä½œ
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ã‚¿ã‚°ç®¡ç†ç”»é¢æ“ä½œ

## ğŸ¨ UXè€ƒæ…®äº‹é …

### ç›´æ„Ÿæ€§
- Appleç´”æ­£ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã¨ã®UIãƒ‘ã‚¿ãƒ¼ãƒ³çµ±ä¸€
- è‰²åˆ†ã‘ã¨ã‚¨ãƒ¢ã‚¸ã«ã‚ˆã‚‹è¦–è¦šçš„åˆ†ã‹ã‚Šã‚„ã™ã•
- ä¸€è²«ã—ãŸã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³

### åŠ¹ç‡æ€§
- ã‚ˆãä½¿ã†ã‚¿ã‚°ã®ä¸Šä½è¡¨ç¤º
- ã‚¯ã‚¤ãƒƒã‚¯é¸æŠæ©Ÿèƒ½
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œ

### å®¶æ—å…±æœ‰
- çµ±ä¸€ã•ã‚ŒãŸã‚¿ã‚°ä½“ç³»
- åˆ©ç”¨çŠ¶æ³ã®å¯è¦–åŒ–
- é‡è¤‡ã‚¿ã‚°ã®é˜²æ­¢æ©Ÿèƒ½

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ã‚¿ã‚°æ•°ãŒå¤šã„å ´åˆã®ä»®æƒ³åŒ–è¡¨ç¤º
- é…å»¶èª­ã¿è¾¼ã¿å¯¾å¿œ
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½æ´»ç”¨

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- å®¶æ—ã‚¹ã‚³ãƒ¼ãƒ—ã§ã®ã‚¿ã‚°éš”é›¢
- é©åˆ‡ãªFirestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
- PIIï¼ˆå€‹äººè­˜åˆ¥æƒ…å ±ï¼‰ã®é™¤å¤–

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
```javascript
// Firestore Security Rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /families/{familyId}/tagMasters/{tagId} {
      allow read, write: if request.auth != null 
        && request.auth.uid in resource.data.members;
    }
  }
}
```

## ğŸ“ˆ æ‹¡å¼µå¯èƒ½æ€§

### å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µ
- ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½
- è‡ªå‹•ã‚¿ã‚°ææ¡ˆï¼ˆMLæ´»ç”¨ï¼‰
- ã‚¿ã‚°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- ä»–ã‚¢ãƒ—ãƒªã¨ã®ã‚¿ã‚°åŒæœŸ

### æŠ€è¡“çš„æ‹¡å¼µæ€§
- GraphQL APIå¯¾å¿œ
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åŒæœŸæ©Ÿèƒ½
- ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
- ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£çµ±åˆ

---

## ğŸ“ æ›´æ–°å±¥æ­´
- 2025-01-XX: åˆç‰ˆä½œæˆ
- Phaseå®Œäº†æ™‚ã«é©å®œæ›´æ–°äºˆå®š

---

**ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯é–‹ç™ºãƒãƒ¼ãƒ å…¨ä½“ã§ã®ä»•æ§˜å…±æœ‰ã¨ã€ä¸€è²«ã—ãŸå®Ÿè£…ã®ãŸã‚ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¨ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚**